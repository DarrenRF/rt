{% extends "base.html" %} {% block title %}Bulletin - RealTop{% endblock %} {%
block content_main_class %}gradient-container{% endblock %} {% block
content_main %}
<div class="page-head">
  <p class="title_search">Bulletin</p>
  {% if total_count %}
  <span class="sidebar-count" aria-label="{{ total_count }} bulletin posts">
    {{ total_count }}
  </span>
  {% endif %}
</div>

<ul class="sidebar-list">
  {% for post in items %}
  <li class="sidebar-item">
    <div
      class="bulletin-link"
      role="link"
      tabindex="0"
      onclick="window.location='/bulletin/{{ post.bulletin_key }}'"
      onkeydown="if (event.key === 'Enter') { window.location='/bulletin/{{ post.bulletin_key }}'; }"
    >
      {% set t = (post.type or 'praise')|lower %} {% set flair_map = { 'poll':
      'flair-poll', 'praise': 'flair-praise', 'critique': 'flair-critique',
      'show & tell': 'flair-show-tell', 'rating highlight':
      'flair-rating-highlight', 'rating challenge': 'flair-rating-challenge' }
      %} {% set flair = flair_map.get(t, 'flair-praise') %}

      <div class="bulletin-summary">
        <span class="bulletin-summary-left">
          <span class="bulletin-type {{ flair }}">{{ t }}</span>
          <span class="bulletin-by">@{{ post.created_by }}</span>
        </span>

        <span class="bulletin-summary-right">
          {% if post.time_ago %}
          <span class="sidebar-meta">{{ post.time_ago }}</span>
          {% endif %} {% if current_user.is_authenticated and
          post.created_by_user_id == current_user.id %}
          <form
            method="post"
            action="/bulletin/{{ post.bulletin_key }}/delete"
            class="bulletin-delete-form"
            onsubmit="
              event.preventDefault();
              event.stopPropagation();
              if (confirm('Delete this post?')) {
                this.submit();
              }
            "
          >
            <input type="hidden" name="next" value="{{ request.path }}" />
            <button
              type="submit"
              class="bulletin-delete"
              aria-label="Delete bulletin post"
              title="Delete"
              onclick="event.stopPropagation()"
            >
              Ã—
            </button>
          </form>
          {% endif %}
        </span>
      </div>
      {% if post.title %}
      <div class="bulletin-title" title="{{ post.title }}">{{ post.title }}</div>
      {% endif %}
    </div>
  </li>
  {% else %}
  <li class="sidebar-item">No bulletin posts yet.</li>
  {% endfor %}
</ul>
{% include "_pagination.html" %} {% endblock %}
